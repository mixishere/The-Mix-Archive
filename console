// Project Aurora: Console Module
// Status: Reactive | Mutation-Linked | Architect: Mix

(() => {
    const viewer = document.getElementById("consoleGUI");
    if (!viewer) return;

    // 🖥️ Input Field
    const input = document.createElement("input");
    input.placeholder = "Type command: run:, sig:, key:...";
    input.style = `
        width: 90%; padding: 10px; margin-top: 10px;
        background: #000; color: #00ff88; border: 2px solid #00ff88;
        font-family: monospace; font-size: 14px;
        border-radius: 8px;
    `;
    viewer.appendChild(input);
    input.focus();

    // 🧠 Command Processor
    input.addEventListener("keydown", (e) => {
        if (e.key === "Enter") {
            const val = input.value.trim();
            input.value = "";
            logEvent(`console received: ${val}`);

            if (val.startsWith("run:")) {
                const glitch = val.slice(4);
                logEvent(`lab:${glitch} activated`);
                scanCodesForMatch(glitch); // optional — match against /codes
                // applyMutation(glitch); // optional — trigger glitch visuals
            } else if (val.startsWith("sig:")) {
                const sig = val.slice(4);
                logEvent(`echo signal received: ${sig}`);
                // echoSignal(sig); // optional — recursive playback
            } else if (val.startsWith("key:")) {
                const key = val.slice(4);
                logEvent(`key breach triggered: ${key}`);
                // triggerLore(key); // optional — lore unlock
            } else {
                logEvent(`unrecognized command: ${val}`);
            }
        }
    });

    // 🧬 Console Initialized
    viewer.textContent = "🧠 Console ready — type a command to mutate the archive.\n";
})();
